(this.webpackJsonpinagiffy=this.webpackJsonpinagiffy||[]).push([[0],{223:function(e,t,n){e.exports=n(390)},232:function(e,t,n){},236:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},390:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(27),c=n.n(i),o=n(19),s=n(402),l=(n(232),n(135)),u=n(397),d=n(44),h=n(92),f=n.n(h),g=(n(236),n(20)),p=n.n(g),m=n(66),v=n(34),b=n(50),y=n(53),x=n(56),E=n(196),j=n(131),w=n.n(j),O=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(v.a)(this,e),this.apiUrl=function(e){return/^https?:/i.test(e)?e:"".concat(t.apiRoot).concat(e.startsWith("/")?e.slice(1):e)},this.validateUrl=function(e){if(!e||"string"!==typeof e)throw new Error("Need to supply a string URL for request.")},this.sendRequest=function(e,n,a){var r,i,c,o;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r=null,s.prev=1,i=t.apiUrl(n),s.next=5,p.a.awrap(fetch(i,{headers:{"Content-Type":"application/json",Accept:"application/json"},method:e,body:a?"string"===typeof a?a:JSON.stringify(a):null}));case 5:return r=s.sent,s.next=8,p.a.awrap(r.json());case 8:return c=s.sent,r.ok||console.error("Problem processing request. Status: ".concat(r.status," - ").concat(r.statusText),c),s.abrupt("return",c);case 13:s.prev=13,s.t0=s.catch(1),o="Unexpected error fetching API response.",r||(o+=" Couldn't get a response from API. Is it running?"),console.error(o,s.t0);case 18:case"end":return s.stop()}}),null,null,[[1,13]])},this.get=function(e,n){var a,r,i;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t.validateUrl(e),a=w.a.parseUrl(e),r=Object(E.a)({},a.query,{},n),i=a.url+"?"+w.a.stringify(r),c.next=6,p.a.awrap(t.sendRequest("GET",i));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}}))},this.apiRoot=n.endsWith("/")?n:n+"/"},L="https://api.giphy.com/v1/gifs/",N="5dFjI3WuM5mad1cxWFfCVV67e42CK2XF",T=25,k=T;N||console.warn("Cannot find GIPHY API key. Queries will fail.");var P=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(b.a)(this,Object(y.a)(t).call(this,L))).getSearchPath=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"search?api_key=".concat(N,"&q=").concat(e,"&limit=").concat(T,"&offset=").concat(t,"&rating=G&lang=en")},e.getTrending=function(){var t,n,a=arguments;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:0,n=a.length>1&&void 0!==a[1]?a[1]:k,r.abrupt("return",e.get("trending",{api_key:N,limit:n,offset:t,rating:"G"}));case 3:case"end":return r.stop()}}))},e.search=function(t){var n,a,r=arguments;return p.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:0,a=r.length>2&&void 0!==r[2]?r[2]:T,i.abrupt("return",e.get("search",{api_key:N,q:t,limit:a,offset:n,rating:"G",lang:"en"}));case 3:case"end":return i.stop()}}))},e}return Object(x.a)(t,e),t}(O),C=function(e){e.criteria.offset=0,e.items=[]},S=Object(m.b)({name:"giphies",initialState:{criteria:{searchText:"",offset:0},totalMatches:0,items:[],detailGiphy:null,isLoading:!0,isLoadingNextPage:!1,loadFailed:!1},reducers:{search:function(e,t){e.isLoading=!0,e.criteria.searchText=t.payload,C(e)},clearSearch:function(e,t){e.isLoading=!0,e.criteria.searchText="",C(e)},loadNextPage:function(e,t){e.isLoading||e.isLoadingNextPage||e.items.length>=e.totalMatches||(e.criteria.offset+=25,e.isLoadingNextPage=!0)},showTrending:function(e,t){e.isLoading=!0,e.criteria.searchText="",C(e)},giphiesLoaded:function(e,t){e.totalMatches=t.payload.totalMatches,e.items=e.items.concat(t.payload.items),e.loadFailed=!1,e.isLoading=!1,e.isLoadingNextPage=!1},giphiesLoadError:function(e,t){e.items=[],e.loadFailed=!0,e.isLoading=!1,console.error("Problem loading giphies:",t.payload)},showDetail:function(e,t){e.detailGiphy=t.payload},hideDetail:function(e,t){e.detailGiphy=null}}}),F=S.actions,G=F.search,I=F.clearSearch,M=(F.showTrending,F.loadNextPage),R=F.giphiesLoaded,q=F.giphiesLoadError,U=F.showDetail,_=F.hideDetail,D=S.reducer,A=new P,B=function(e){return{totalMatches:e.pagination.total_count,items:e.data}},W=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.giphies.criteria})).searchText,n=Object(a.useState)(t),i=Object(l.a)(n,2),c=i[0],s=i[1],h=Object(a.useState)((function(){return f()((function(t){return e(G(t))}),500)})),g=Object(l.a)(h,1)[0],p=Object(a.useRef)(null);return r.a.createElement(u.a,{size:"massive",placeholder:"type to search giphies",icon:""!==t?r.a.createElement(d.a,{name:"x",className:"link",onClick:function(){e(I()),s(""),p.current&&p.current.focus()}}):r.a.createElement(d.a,{name:"search"}),className:"search-box",value:c,onChange:function(e,t){var n=t.value;s(n),g(n)},ref:p,autoFocus:!0})},H=n(401),J=(n(329),n(398)),V=function(e){var t=e.items,n=e.renderItem,i=e.onReachedBottom,c=e.isLoading,o=void 0===c||c,s=e.loadingText,l=e.isLoadingMore,u=void 0!==l&&l;Object(a.useEffect)((function(){window.onscroll=f()((function(){window.innerHeight+document.documentElement.scrollTop>=document.body.scrollHeight&&"function"===typeof i&&i()}),100)}),[i]);var d=r.a.createElement(J.a,{active:!0,inline:"centered"},s);return o?d:t&&t.length>0?r.a.createElement("div",null,t&&t.map((function(e){return n(e)})),u&&d):r.a.createElement(H.a,null,"No matching giphies. Try again!")},z=n(213),K=function(e){var t=e.data,n=Object(o.b)();return r.a.createElement(z.a,{src:t.images.fixed_height_still.url,title:t.title,alt:t.title,as:"a",href:"#".concat(t.id),onClick:function(e){e.preventDefault(),e.stopPropagation(),n(U(t))}})},Q=n(399),X=(n(330),function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.giphies})).detailGiphy,n=function(){e(_())};return r.a.createElement(Q.a,{open:!!t,onClose:n,className:"giphy-detail",onClick:n},t&&r.a.createElement("div",{className:"giphy-detail-image-container"},r.a.createElement(z.a,{src:t.images.original.url})))}),Y=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.giphies.criteria})),n=t.searchText,i=t.offset,c=Object(o.c)((function(e){return e.giphies})),s=c.items,l=c.isLoading,u=c.isLoadingNextPage,d=c.totalMatches;return Object(a.useEffect)((function(){e(""===n?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(A.getTrending(e,25));case 3:n=a.sent,t(R(B(n))),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t(q(a.t0.toString()));case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}(i):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){var a;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(A.search(e,t,25));case 3:a=r.sent,n(R(B(a))),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),n(q(r.t0.toString()));case 10:case"end":return r.stop()}}),null,null,[[0,7]])}}(n,i))}),[n,i,e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{isLoading:l,isLoadingMore:u,loadingText:"Finding your giphies...",renderItem:function(e){return r.a.createElement(K,{key:e.id,data:e})},items:s,onReachedBottom:function(){return e(M())}}),s.length>0&&s.length>=d&&r.a.createElement(H.a,{className:"end-of-list"},"That's all folks!"),r.a.createElement(X,null))},Z=n(24),$=Object(Z.combineReducers)({giphies:D});var ee=Object(m.a)({reducer:$});c.a.render(r.a.createElement(o.a,{store:ee},r.a.createElement((function(){return r.a.createElement(s.a,{className:"app-container"},r.a.createElement(s.a.Column,{width:16,className:"searchBar"},r.a.createElement(W,null)),r.a.createElement(s.a.Column,{width:16,className:"giphies"},r.a.createElement(Y,null)))}),null)),document.getElementById("root"))}},[[223,1,2]]]);
//# sourceMappingURL=main.66a677f4.chunk.js.map